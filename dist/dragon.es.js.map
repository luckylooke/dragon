{"version":3,"file":"dragon.es.js","sources":["../node_modules/custom-event/index.js","../node_modules/crossvent/src/crossvent.js","../src/utils.js","../src/classes.js","../node_modules/middle.js/dist/middle.es.js","../src/polyfills.js","../node_modules/crossvent/src/eventmap.js","../src/touchy.js","../src/drag.js","../src/item.js","../src/container.js","../src/dragon.js"],"sourcesContent":["\nvar NativeCustomEvent = global.CustomEvent;\n\nfunction useNative () {\n  try {\n    var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });\n    return  'cat' === p.type && 'bar' === p.detail.foo;\n  } catch (e) {\n  }\n  return false;\n}\n\n/**\n * Cross-browser `CustomEvent` constructor.\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent\n *\n * @public\n */\n\nmodule.exports = useNative() ? NativeCustomEvent :\n\n// IE >= 9\n'function' === typeof document.createEvent ? function CustomEvent (type, params) {\n  var e = document.createEvent('CustomEvent');\n  if (params) {\n    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\n  } else {\n    e.initCustomEvent(type, false, false, void 0);\n  }\n  return e;\n} :\n\n// IE <= 8\nfunction CustomEvent (type, params) {\n  var e = document.createEventObject();\n  e.type = type;\n  if (params) {\n    e.bubbles = Boolean(params.bubbles);\n    e.cancelable = Boolean(params.cancelable);\n    e.detail = params.detail;\n  } else {\n    e.bubbles = false;\n    e.cancelable = false;\n    e.detail = void 0;\n  }\n  return e;\n}\n","'use strict';\n\nvar customEvent = require('custom-event');\nvar eventmap = require('./eventmap');\nvar doc = global.document;\nvar addEvent = addEventEasy;\nvar removeEvent = removeEventEasy;\nvar hardCache = [];\n\nif (!global.addEventListener) {\n  addEvent = addEventHard;\n  removeEvent = removeEventHard;\n}\n\nmodule.exports = {\n  add: addEvent,\n  remove: removeEvent,\n  fabricate: fabricateEvent\n};\n\nfunction addEventEasy (el, type, fn, capturing) {\n  return el.addEventListener(type, fn, capturing);\n}\n\nfunction addEventHard (el, type, fn) {\n  return el.attachEvent('on' + type, wrap(el, type, fn));\n}\n\nfunction removeEventEasy (el, type, fn, capturing) {\n  return el.removeEventListener(type, fn, capturing);\n}\n\nfunction removeEventHard (el, type, fn) {\n  var listener = unwrap(el, type, fn);\n  if (listener) {\n    return el.detachEvent('on' + type, listener);\n  }\n}\n\nfunction fabricateEvent (el, type, model) {\n  var e = eventmap.indexOf(type) === -1 ? makeCustomEvent() : makeClassicEvent();\n  if (el.dispatchEvent) {\n    el.dispatchEvent(e);\n  } else {\n    el.fireEvent('on' + type, e);\n  }\n  function makeClassicEvent () {\n    var e;\n    if (doc.createEvent) {\n      e = doc.createEvent('Event');\n      e.initEvent(type, true, true);\n    } else if (doc.createEventObject) {\n      e = doc.createEventObject();\n    }\n    return e;\n  }\n  function makeCustomEvent () {\n    return new customEvent(type, { detail: model });\n  }\n}\n\nfunction wrapperFactory (el, type, fn) {\n  return function wrapper (originalEvent) {\n    var e = originalEvent || global.event;\n    e.target = e.target || e.srcElement;\n    e.preventDefault = e.preventDefault || function preventDefault () { e.returnValue = false; };\n    e.stopPropagation = e.stopPropagation || function stopPropagation () { e.cancelBubble = true; };\n    e.which = e.which || e.keyCode;\n    fn.call(el, e);\n  };\n}\n\nfunction wrap (el, type, fn) {\n  var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);\n  hardCache.push({\n    wrapper: wrapper,\n    element: el,\n    type: type,\n    fn: fn\n  });\n  return wrapper;\n}\n\nfunction unwrap (el, type, fn) {\n  var i = find(el, type, fn);\n  if (i) {\n    var wrapper = hardCache[i].wrapper;\n    hardCache.splice(i, 1); // free up a tad of memory\n    return wrapper;\n  }\n}\n\nfunction find (el, type, fn) {\n  var i, item;\n  for (i = 0; i < hardCache.length; i++) {\n    item = hardCache[i];\n    if (item.element === el && item.type === type && item.fn === fn) {\n      return i;\n    }\n  }\n}\n","let doc = document\nlet docElm = doc.documentElement\n\nexport default function Utils() {\n\n}\n\nexport function getImmediateChild( dropTarget, target ) {\n\n\tlet immediate = target\n\n\twhile ( immediate !== dropTarget && getParent( immediate ) !== dropTarget ) {\n\t\timmediate = getParent( immediate )\n\t}\n\n\tif ( immediate === docElm ) {\n\t\treturn null\n\t}\n\n\treturn immediate\n}\n\nexport function getReference( dropTarget, target, x, y, direction ) {\n\n\tlet horizontal = direction === 'horizontal'\n\treturn target !== dropTarget ? inside() : outside() // reference\n\n\tfunction outside() { // slower, but able to figure out any position\n\t\tlet len = dropTarget.children.length,\n\t\t\ti,\n\t\t\tel,\n\t\t\trect\n\n\t\tfor ( i = 0; i < len; i++ ) {\n\n\t\t\tel = dropTarget.children[ i ]\n\t\t\trect = el.getBoundingClientRect()\n\n\t\t\tif ( horizontal && (rect.left + rect.width / 2) > x ) {\n\t\t\t\treturn el\n\t\t\t}\n\n\t\t\tif ( !horizontal && (rect.top + rect.height / 2) > y ) {\n\t\t\t\treturn el\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t}\n\n\tfunction inside() { // faster, but only available if dropped inside a child element\n\n\t\tlet rect = target.getBoundingClientRect()\n\n\t\tif ( horizontal ) {\n\t\t\treturn resolve( x > rect.left + getRectWidth( rect ) / 2 )\n\t\t}\n\n\t\treturn resolve( y > rect.top + getRectHeight( rect ) / 2 )\n\t}\n\n\tfunction resolve( after ) {\n\n\t\treturn after ? nextEl( target ) : target\n\t}\n}\n\nexport function getCoord( coord, e ) {\n\n\tlet host = getEventHost( e )\n\tlet missMap = {\n\t\tpageX: 'clientX', // IE8\n\t\tpageY: 'clientY' // IE8\n\t}\n\n\tif ( coord in missMap && !(coord in host) && missMap[ coord ] in host ) {\n\t\tcoord = missMap[ coord ]\n\t}\n\n\treturn host[ coord ]\n}\n\nexport function getEventHost( e ) {\n\n\t// on touchend event, we have to use `e.changedTouches`\n\t// see http://stackoverflow.com/questions/7192563/touchend-event-properties\n\t// see github.com/bevacqua/dragula/issues/34\n\tif ( e.targetTouches && e.targetTouches.length ) {\n\t\treturn e.targetTouches[ 0 ]\n\t}\n\n\tif ( e.changedTouches && e.changedTouches.length ) {\n\t\treturn e.changedTouches[ 0 ]\n\t}\n\n\treturn e\n}\n\n// export function whichMouseButton (e) {\n//   /** @namespace e.touches -- resolving webstorm unresolved variables */\n//   if (e.touches !== void 0) { return e.touches.length }\n//   if (e.which !== void 0 && e.which !== 0) { return e.which } // see github.com/bevacqua/dragula/issues/261\n//   if (e.buttons !== void 0) { return e.buttons }\n//   let button = e.button\n//   if (button !== void 0) { // see github.com/jquery/jquery/blob/99e8ff1baa7ae341e94bb89c3e84570c7c3ad9ea/src/event.js#L573-L575\n//     return button & 1 ? 1 : button & 2 ? 3 : (button & 4 ? 2 : 0)\n//   }\n// }\n\n// get offset of element from top left corner of document\nexport function getOffset( el ) {\n\n\tlet rect = el.getBoundingClientRect()\n\n\treturn {\n\t\tleft: rect.left + getScroll( 'scrollLeft', 'pageXOffset' ),\n\t\ttop: rect.top + getScroll( 'scrollTop', 'pageYOffset' )\n\t}\n}\n\nexport function getScroll( scrollProp, offsetProp ) {\n\n\tif ( typeof global[ offsetProp ] !== 'undefined' ) {\n\t\treturn global[ offsetProp ]\n\t}\n\n\tif ( docElm.clientHeight ) {\n\t\treturn docElm[ scrollProp ]\n\t}\n\n\treturn doc.body[ scrollProp ]\n}\n\nexport function getElementBehindPoint( elmToHide, x, y ) {\n\n\tlet state = elmToHide.className\n\tlet el\n\n\t// hide elmToHide\n\telmToHide.className += ' gu-hide'\n\t// look at the position\n\tel = doc.elementFromPoint( x, y )\n\t// show elmToHide back\n\telmToHide.className = state\n\n\treturn el\n}\n\nexport function getRectWidth( rect ) {\n\n\treturn rect.width || (rect.right - rect.left)\n}\n\nexport function getRectHeight( rect ) {\n\n\treturn rect.height || (rect.bottom - rect.top)\n}\n\nexport function getParent( el ) {\n\n\treturn el.parentNode === doc ? null : el.parentNode\n}\n\nexport function nextEl( el ) {\n\n\treturn el.nextElementSibling || manually()\n\n\tfunction manually() {\n\t\tlet sibling = el\n\t\tdo {\n\t\t\tsibling = sibling.nextSibling\n\t\t} while ( sibling && sibling.nodeType !== 1 )\n\t\treturn sibling\n\t}\n}\n\nexport function toArray( obj ) {\n\n\treturn [].slice.call( obj )\n}\n\nexport function bind( obj, methodName ) {\n\n\tlet bindedName = 'binded' + methodName\n\n\tif ( !obj[ bindedName ] )\n\t\tobj[ bindedName ] = function () {\n\t\t\tobj[ methodName ].apply( obj, arguments )\n\t\t}\n\n\treturn obj[ bindedName ]\n}\n\nexport function domIndexOf( parent, child ) {\n\t// Possible problems with IE8- ? https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/children#Browser_compatibility\n\treturn Array.prototype.indexOf.call( parent.children, child )\n}\n\nexport function isInput( el ) {\n\treturn el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.tagName === 'SELECT' || isEditable( el )\n}\n\nexport function isEditable( el ) {\n\n\tif ( !el ) {\n\t\treturn false\n\t}\n\t// no parents were editable\n\tif ( el.contentEditable === 'false' ) {\n\t\treturn false\n\t}\n\t// stop the lookup\n\tif ( el.contentEditable === 'true' ) {\n\t\treturn true\n\t}\n\t// found a contentEditable element in the chain\n\treturn isEditable( getParent( el ) ) // contentEditable is set to 'inherit'\n}\n\nexport function lookUpByElm( sourceArray, elm ) {\n\n\tlet len = sourceArray.length\n\n\tfor ( let i = 0; i < len; i++ ) {\n\n\t\tif ( sourceArray[ i ].elm == elm )\n\t\t\treturn i\n\t}\n\n\treturn -1\n}\n\n","'use strict';\n\nlet cache = {};\nlet start = '(?:^|\\\\s)';\nlet end = '(?:\\\\s|$)';\n\nfunction lookupClass (className) {\n  let cached = cache[className];\n  if (cached) {\n    cached.lastIndex = 0;\n  } else {\n    cache[className] = cached = new RegExp(start + className + end, 'g');\n  }\n  return cached;\n}\n\nfunction addClass (el, className) {\n  let current = el.className;\n  if (!current.length) {\n    el.className = className;\n  } else if (!lookupClass(className).test(current)) {\n    el.className += ' ' + className;\n  }\n}\n\nfunction rmClass (el, className) {\n  el.className = el.className.replace(lookupClass(className), ' ').trim();\n}\n\nmodule.exports = {\n  add: addClass,\n  rm: rmClass\n};\n","function middle(e,t){var _=function t(){var n=Array.prototype.slice.call(arguments);return void 0===_._m_ctx&&(_._m_ctx=this),_._m_stack.length===_._m_index?(_._m_index=0,e.apply(_._m_ctx,n)):(n.unshift(t),_._m_stack[_._m_index++].apply(_._m_ctx,n))};return _._m_stack=[],_._m_index=0,_._m_ctx=t,_.use=function(e,t){_._m_stack.push(e.bind(t))},_}function decorator(e,t,_){if(e){var n=_.writable,i=_.enumerable;return{get:function(){var e=middle(_.value,this);return Object.defineProperty(this,t,{value:e,writable:n,enumerable:i}),e}}}}export{decorator};export default middle;\n//# sourceMappingURL=middle.es.js.map\n","/**\n * Polyfill from https://github.com/remy/polyfills/blob/master/classList.js\n */\n\n(function () {\n\n\tif ( typeof window.Element === \"undefined\" || \"classList\" in document.documentElement ) return;\n\n\tlet prototype = Array.prototype,\n\t\tpush = prototype.push,\n\t\tsplice = prototype.splice,\n\t\tjoin = prototype.join;\n\n\tfunction DOMTokenList( el ) {\n\t\tthis.el = el;\n\t\t// The className needs to be trimmed and split on whitespace\n\t\t// to retrieve a list of classes.\n\t\tlet classes = el.className.replace( /^\\s+|\\s+$/g, '' ).split( /\\s+/ );\n\t\tfor ( let i = 0; i < classes.length; i++ ) {\n\t\t\tpush.call( this, classes[ i ] );\n\t\t}\n\t}\n\n\tDOMTokenList.prototype = {\n\t\tadd: function ( token ) {\n\t\t\tif ( this.contains( token ) ) return;\n\t\t\tpush.call( this, token );\n\t\t\tthis.el.className = this.toString();\n\t\t},\n\t\tcontains: function ( token ) {\n\t\t\treturn this.el.className.indexOf( token ) != -1;\n\t\t},\n\t\titem: function ( index ) {\n\t\t\treturn this[ index ] || null;\n\t\t},\n\t\tremove: function ( token ) {\n\t\t\tif ( !this.contains( token ) ) return;\n\t\t\tfor ( let i = 0; i < this.length; i++ ) {\n\t\t\t\tif ( this[ i ] == token ) break;\n\t\t\t}\n\t\t\tsplice.call( this, i, 1 );\n\t\t\tthis.el.className = this.toString();\n\t\t},\n\t\ttoString: function () {\n\t\t\treturn join.call( this, ' ' );\n\t\t},\n\t\ttoggle: function ( token ) {\n\t\t\tif ( !this.contains( token ) ) {\n\t\t\t\tthis.add( token );\n\t\t\t} else {\n\t\t\t\tthis.remove( token );\n\t\t\t}\n\n\t\t\treturn this.contains( token );\n\t\t}\n\t};\n\n\twindow.DOMTokenList = DOMTokenList;\n\n\tfunction defineElementGetter( obj, prop, getter ) {\n\t\tif ( Object.defineProperty ) {\n\t\t\tObject.defineProperty( obj, prop, {\n\t\t\t\tget: getter\n\t\t\t} );\n\t\t} else {\n\t\t\tobj.__defineGetter__( prop, getter );\n\t\t}\n\t}\n\n\tdefineElementGetter( Element.prototype, 'classList', function () {\n\t\treturn new DOMTokenList( this );\n\t} );\n\n})();\n\n\n/**\n * Polyfill from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/now#Polyfill\n */\n\nif (!Date.now) {\n\tDate.now = function now() {\n\t\treturn new Date().getTime();\n\t};\n}\n\n\n// // Simple version of polyfill Array.prototype.forEach()\n// if ( ![].forEach ) {\n// \tArray.prototype.forEach = function ( callback, thisArg ) {\n// \t\tlet len = this.length;\n// \t\tfor ( let i = 0; i < len; i++ ) {\n// \t\t\tcallback.call( thisArg, this[ i ], i, this )\n// \t\t}\n// \t};\n// }\n\n\n/**\n * Polyfill from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind#Polyfill\n */\n\nif (!Function.prototype.bind) {\n\tFunction.prototype.bind = function(oThis) {\n\t\tif (typeof this !== 'function') {\n\t\t\t// closest thing possible to the ECMAScript 5\n\t\t\t// internal IsCallable function\n\t\t\tthrow new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n\t\t}\n\n\t\tlet aArgs   = Array.prototype.slice.call(arguments, 1),\n\t\t\tfToBind = this,\n\t\t\tfNOP    = function() {},\n\t\t\tfBound  = function() {\n\t\t\t\treturn fToBind.apply(this instanceof fNOP\n\t\t\t\t\t\t? this\n\t\t\t\t\t\t: oThis,\n\t\t\t\t\taArgs.concat(Array.prototype.slice.call(arguments)));\n\t\t\t};\n\n\t\tif (this.prototype) {\n\t\t\t// Function.prototype doesn't have a prototype property\n\t\t\tfNOP.prototype = this.prototype;\n\t\t}\n\t\tfBound.prototype = new fNOP();\n\n\t\treturn fBound;\n\t};\n}","'use strict';\n\nvar eventmap = [];\nvar eventname = '';\nvar ron = /^on/;\n\nfor (eventname in global) {\n  if (ron.test(eventname)) {\n    eventmap.push(eventname.slice(2));\n  }\n}\n\nmodule.exports = eventmap;\n","\"use strict\";\nlet crossvent = require('crossvent');\n\nmodule.exports = function touchy (el, op, type, fn) {\n    let touch = {\n        mouseup: 'touchend',\n        mousedown: 'touchstart',\n        mousemove: 'touchmove'\n    };\n    let pointers = {\n        mouseup: 'pointerup',\n        mousedown: 'pointerdown',\n        mousemove: 'pointermove'\n    };\n    let microsoft = {\n        mouseup: 'MSPointerUp',\n        mousedown: 'MSPointerDown',\n        mousemove: 'MSPointerMove'\n    };\n\n    /** @namespace global.navigator.pointerEnabled -- resolving webstorm unresolved variables */\n    /** @namespace global.navigator.msPointerEnabled -- resolving webstorm unresolved variables */\n    if (global.navigator.pointerEnabled) {\n        crossvent[op](el, pointers[type] || type, fn);\n    } else if (global.navigator.msPointerEnabled) {\n        crossvent[op](el, microsoft[type] || type, fn);\n    } else {\n        crossvent[op](el, touch[type] || type, fn);\n        crossvent[op](el, type, fn);\n    }\n};","import touchy from './touchy' // cross event\nimport classes from './classes' // cross event\nimport {\n\tbind, nextEl, domIndexOf, getOffset, getCoord, getRectWidth, getRectHeight,\n\tgetElementBehindPoint, getImmediateChild, getReference, getParent\n} from './utils' // cross event\nimport { decorator as middle } from 'middle.js'\n\nlet docElm = document.documentElement\n\nexport default class Drag {\n\n\tconstructor( x, y, item ) {\n\n\t\t// this.mirror // mirror image\n\t\t// this.source // source container element\n\t\t// this.source // source Container object\n\t\t// this.itemElm // item element being dragged\n\t\t// this.itemOffsetX // reference x offset event from itemElement corner\n\t\t// this.itemOffsetY // reference y\n\t\t// this.x // reference move x - clientX of first event occurrence starting the drag\n\t\t// this.y // reference move y\n\t\t// this.initialSibling // reference sibling when grabbed\n\t\t// this.currentSibling // reference sibling now\n\t\t// this.state // holds Drag state (grabbed, dragging, dropped...)\n\n\t\tthis.x = x\n\t\tthis.y = y\n\t\tthis.state = 'grabbed'\n\n\t\tthis.item = item\n\t\tthis.itemElm = item.elm\n\t\tthis.sourceContainer = item.container\n\t\tthis.source = item.container.elm\n\t\t//noinspection JSUnresolvedVariable\n\t\tthis.dragon = this.sourceContainer.dragon\n\t\tthis.findDropTarget = this.dragon.findDropTarget.bind( this.dragon )\n\n\t\t// use requestAnimationFrame while dragging if available\n\t\tif ( window.requestAnimationFrame ) {\n\n\t\t\tthis._mousemove = this._mousemoveAF\n\t\t\tthis.move_e = false\n\t\t}\n\t\telse\n\n\t\t\tthis._mousemove = this.mousemove\n\n\t\tthis.events()\n\t}\n\n\t@middle\n\tdestroy() {\n\n\t\tthis.release( this.x, this.y )\n\t}\n\n\t@middle\n\tevents( remove ) {\n\n\t\tlet op = remove ? 'remove' : 'add'\n\t\ttouchy( docElm, op, 'mouseup', bind( this, 'mouseup' ) )\n\t\ttouchy( docElm, op, 'mousemove', bind( this, '_mousemove' ) )\n\t\ttouchy( docElm, op, 'selectstart', bind( this, 'protectGrab' ) ) // IE8\n\t\ttouchy( docElm, op, 'click', bind( this, 'protectGrab' ) )\n\t}\n\n\t@middle\n\tprotectGrab( e ) {\n\n\t\tif ( this.state == 'grabbed' ) {\n\t\t\te.preventDefault()\n\t\t}\n\t}\n\n\t@middle\n\tmousemove( e ) {\n\n\t\tif ( !e.target ) {\n\n\t\t\te = this.move_e\n\t\t\tthis.move_e = false\n\t\t}\n\n\t\tif ( this.state == 'grabbed' ) {\n\n\t\t\tthis.startByMouseMove( e )\n\t\t\treturn\n\t\t}\n\n\t\tif ( this.state != 'dragging' ) {\n\n\t\t\tthis.cancel()\n\t\t\treturn\n\t\t}\n\n\t\te.preventDefault()\n\n\t\tthis.drag(\n\n\t\t\tgetCoord( 'clientX', e ),\n\t\t\tgetCoord( 'clientY', e )\n\t\t)\n\t}\n\n\t_mousemoveAF( e ) {\n\n\t\tif ( !this.move_e )\n\t\t\tthis.actualFrame = window.requestAnimationFrame( this.mousemove )\n\n\t\tthis.move_e = e\n\t}\n\n\t@middle\n\tdrag( x, y ) {\n\n\t\tif ( this.state != 'dragging' )\n\t\t\treturn\n\n\t\tlet mirrorX = x - this.itemOffsetX,\n\t\t\tmirrorY = y - this.itemOffsetY,\n\t\t\tmirror = this.mirror\n\n\t\tmirror.style.left = mirrorX + 'px'\n\t\tmirror.style.top = mirrorY + 'px'\n\n\t\tlet elementBehindCursor = getElementBehindPoint( mirror, x, y ),\n\t\t\tdropTarget = this.findDropTarget( elementBehindCursor ),\n\t\t\treference,\n\t\t\timmediate = dropTarget && getImmediateChild( dropTarget, elementBehindCursor )\n\n\t\tif ( immediate ) {\n\n\t\t\treference = getReference( dropTarget, immediate, x, y )\n\t\t}\n\t\telse {\n\n\t\t\treturn\n\t\t}\n\n\t\tif (\n\n\t\t\treference === null ||\n\t\t\treference !== this.itemElm &&\n\t\t\treference !== nextEl( this.itemElm )\n\t\t) {\n\n\t\t\tthis.currentSibling = reference\n\t\t\tdropTarget.insertBefore( this.itemElm, reference )\n\t\t}\n\t}\n\n\t@middle\n\tstartByMouseMove( e ) {\n\n\t\t// if (whichMouseButton(e) === 0) {\n\t\t//   release({})\n\t\t//   return // when text is selected on an input and then dragged, mouseup doesn't fire. this is our only hope\n\t\t// }\n\n\t\t// truthy check fixes github.com/bevacqua/dragula/issues/239, equality fixes github.com/bevacqua/dragula/issues/207\n\t\tif ( e.clientX !== void 0 && e.clientX === this.x && e.clientY !== void 0 && e.clientY === this.y ) {\n\t\t\treturn\n\t\t}\n\n\t\tconsole.log('START', this, e);\n\n\t\tthis.start(\n\t\t\tgetCoord( 'pageX', e ),\n\t\t\tgetCoord( 'pageY', e )\n\t\t)\n\t}\n\n\t@middle\n\tstart( x, y ) {\n\n\t\tif ( this.state != 'grabbed' )\n\t\t\treturn\n\n\t\tthis.initialSibling = this.currentSibling = nextEl( this.itemElm )\n\n\t\tlet offset = getOffset( this.itemElm )\n\n\t\t// offset of mouse event from top left corner of the itemElm\n\t\tthis.itemOffsetX = x - offset.left\n\t\tthis.itemOffsetY = y - offset.top\n\n\t\tclasses.add( this.itemElm, 'gu-transit' )\n\t\tthis.mirror = this.renderMirrorImage( this.itemElm, this.getConfig( 'mirrorContainer' ) )\n\n\t\tthis.state = 'dragging'\n\t}\n\n\t@middle\n\trenderMirrorImage( itemElm, mirrorContainer ) {\n\n\t\tlet rect = itemElm.getBoundingClientRect()\n\t\tlet mirror = itemElm.cloneNode( true )\n\n\t\tmirror.style.width = getRectWidth( rect ) + 'px'\n\t\tmirror.style.height = getRectHeight( rect ) + 'px'\n\t\tclasses.rm( mirror, 'gu-transit' )\n\t\tclasses.add( mirror, 'gu-mirror' )\n\t\tmirrorContainer.appendChild( mirror )\n\t\tclasses.add( mirrorContainer, 'gu-unselectable' )\n\n\t\treturn mirror\n\t}\n\n\t@middle\n\tremoveMirrorImage( mirror ) {\n\n\t\tlet mirrorContainer = getParent( mirror )\n\t\tclasses.rm( mirrorContainer, 'gu-unselectable' )\n\t\tmirrorContainer.removeChild( mirror )\n\t}\n\n\t@middle\n\tmouseup( e ) {\n\n\t\tthis.release(\n\n\t\t\tgetCoord( 'clientX', e ),\n\t\t\tgetCoord( 'clientY', e )\n\t\t)\n\t}\n\n\t@middle\n\trelease( x, y ) {\n\n\t\tif ( this.state != 'dragging' )\n\t\t\treturn this.cancel()\n\n\t\t// if requestAnimationFrame mode is used, cancel latest request\n\t\tif ( this.actualFrame ) {\n\t\t\twindow.cancelAnimationFrame( this.actualFrame )\n\t\t\tthis.actualFrame = false\n\t\t}\n\n\t\tlet elementBehindCursor = getElementBehindPoint( this.mirror, x, y )\n\t\tlet dropTarget = this.findDropTarget( elementBehindCursor )\n\n\t\tif ( dropTarget && dropTarget !== this.source ) {\n\n\t\t\tthis.drop( dropTarget )\n\t\t}\n\t\telse {\n\n\t\t\tthis.cancel()\n\t\t}\n\t}\n\n\t@middle\n\tdrop( dropTarget ) {\n\n\t\tif ( this.state != 'dragging' )\n\t\t\treturn\n\n\t\tlet container = this.dragon.getContainer( dropTarget )\n\t\tcontainer.addItem( this.item, domIndexOf( dropTarget, this.itemElm ) )\n\t\tthis.state = 'dropped'\n\n\t\tthis.cleanup()\n\t}\n\n\t@middle\n\tremove() {\n\n\t\tif ( this.state != 'dragging' )\n\t\t\treturn\n\n\t\tlet parent = getParent( this.itemElm )\n\t\tif ( parent ) {\n\t\t\tparent.removeChild( this.itemElm )\n\t\t}\n\n\t\tthis.state = 'removed'\n\n\t\tthis.cleanup()\n\t}\n\n\t@middle\n\tcancel( reverts ) {\n\n\t\tif ( this.state == 'dragging' ) {\n\n\t\t\tlet parent = getParent( this.itemElm )\n\t\t\tlet initial = this.isInitialPlacement( parent )\n\t\t\tif ( initial === false && reverts ) {\n\t\t\t\tthis.source.insertBefore( this.itemElm, this.initialSibling )\n\t\t\t}\n\t\t}\n\n\t\tthis.state = 'cancelled'\n\n\t\tthis.cleanup()\n\t}\n\n\t@middle\n\tcleanup() {\n\n\t\tthis.events( 'remove' )\n\n\t\tif ( this.mirror )\n\t\t\tthis.removeMirrorImage( this.mirror )\n\n\t\tif ( this.itemElm ) {\n\t\t\tclasses.rm( this.itemElm, 'gu-transit' )\n\t\t}\n\t}\n\n\t@middle\n\tisInitialPlacement( target, s ) {\n\n\t\tlet sibling\n\n\t\tif ( s !== void 0 ) {\n\n\t\t\tsibling = s\n\t\t}\n\t\telse if ( this.mirror ) {\n\n\t\t\tsibling = this.currentSibling\n\t\t}\n\t\telse {\n\n\t\t\tsibling = nextEl( this.itemElm )\n\t\t}\n\n\t\treturn target === this.source && sibling === this.initialSibling\n\t}\n\n\t@middle\n\tgetConfig( prop ) {\n\n\t\treturn this.item.getConfig( prop )\n\t}\n}\n","import Drag from './drag'\nimport { decorator as middle } from 'middle.js'\n\nexport default class Item {\n\n\tconstructor( container, elm, config ) {\n\n\t\tif ( !config )\n\t\t\tconfig = {}\n\n\t\tthis.config = config\n\t\tthis.id = config.id || 'itemID_' + Date.now()\n\t\tthis.container = container\n\t\tthis.elm = elm\n\t}\n\n\t@middle\n\tgrab( x, y ) {\n\n\t\tthis.drag = new Drag( x, y, this )\n\t\treturn this.drag\n\t}\n\n\t@middle\n\tgetConfig( prop ) {\n\n\t\tprop = this.config.hasOwnProperty( prop ) ? this.config[ prop ] : this.container.getConfig( prop )\n\t\treturn typeof prop == 'function' ? prop() : prop\n\t}\n}","import Item from './item'\nimport { toArray, lookUpByElm } from './utils'\nimport { decorator as middle } from 'middle.js'\n\nexport default class Container {\n\n\tconstructor( dragon, elm, config ) {\n\n\t\tif ( !config )\n\t\t\tconfig = {}\n\n\t\tthis.config = config\n\t\tthis.id = config.id || 'containerID_' + Date.now()\n\t\tthis.dragon = dragon\n\t\tthis.items = []\n\t\tthis.elm = elm\n\n\t\tthis.initItems()\n\t}\n\n\t@middle\n\tgrab( x, y, itemElm ) {\n\n\t\treturn this.items[ lookUpByElm( this.items, itemElm ) ].grab( x, y )\n\t}\n\n\t@middle\n\taddItem( itemOrElm, index, config ) {\n\n\t\tindex = index || 0\n\n\t\tlet item\n\n\t\tif ( itemOrElm instanceof Item ) {\n\n\t\t\titemOrElm.container = this\n\t\t\titem = itemOrElm\n\t\t} else {\n\n\t\t\titem = new Item( this, itemOrElm, config )\n\t\t}\n\n\t\tthis.items.splice( index, 0, item )\n\t\treturn this\n\t}\n\n\t@middle\n\tremoveItem( itemOrElm ) {\n\n\t\tlet index\n\n\t\tif ( itemOrElm instanceof Item ) {\n\n\t\t\titemOrElm.container = null\n\t\t\tindex = this.items.indexOf( itemOrElm )\n\t\t} else {\n\n\t\t\tindex = lookUpByElm( this.items, itemOrElm )\n\t\t}\n\n\t\tthis.items.splice( index, 1 )\n\t\treturn this\n\t}\n\n\t@middle\n\tinitItems() {\n\n\t\tlet arr = toArray( this.elm.children )\n\t\tlet len = arr.length\n\n\t\tfor ( let i = 0; i < len; i++ ) {\n\t\t\tthis.addItem( arr[ i ] )\n\t\t}\n\t}\n\n\t@middle\n\tgetConfig( prop ) {\n\n\t\tprop = this.config.hasOwnProperty( prop ) ? this.config[ prop ] : this.dragon.getConfig( prop )\n\t\treturn typeof prop == 'function' ? prop() : prop\n\t}\n}","'use strict'\n\nimport './polyfills.js' // Element.classList polyfill\nimport touchy from './touchy.js' // cross event\nimport { getParent, toArray, isInput, lookUpByElm } from './utils'\nimport Container from './container'\nimport { decorator as middle } from 'middle.js'\n\nlet doc = document\n\nif ( !window.dragonSpace )\n\twindow.dragonSpace = {}\nlet space = window.dragonSpace\n\n// ==============================================================================================================================================================\n// Dragon =====================================================================================================================================================\n// =============================================================================================================================================================\n/** is group of containers */\nexport default class Dragon {\n\n\tconstructor( config ) {\n\n\t\tconfig = config || {}\n\n\t\tif ( typeof config.length !== 'undefined' ) // is array-like\n\t\t\tconfig = { containers: toArray( config ) }\n\n\t\tthis.initSpace( config.space )\n\t\tthis.space = space\n\t\tspace.dragons.push( this )\n\n\t\tthis.config = config\n\t\tthis.defaults = {\n\t\t\tmirrorContainer: doc.body\n\t\t}\n\t\tthis.id = config.id || 'dragonID_' + Date.now()\n\t\tthis.containers = []\n\n\t\t// init\n\t\tthis.addContainers()\n\t}\n\n\t@middle\n\tinitSpace( newSpace ) {\n\n\t\tif ( newSpace )\n\n\t\t\tspace = newSpace\n\n\t\tif ( !space.dragons ) { // initialisation\n\n\t\t\tspace.dragons = []\n\t\t\ttouchy( document.documentElement, 'add', 'mousedown', e => {\n\n\t\t\t\te.preventDefault() // fixes github.com/bevacqua/dragula/issues/155\n\t\t\t\tthis.grab( e.target, e.clientX, e.clientY )\n\t\t\t} )\n\t\t}\n\n\t\tif ( !space.Dragon )\n\n\t\t\tspace.Dragon = Dragon\n\t}\n\n\t@middle\n\taddContainers( containerElms, config ) {\n\n\t\tcontainerElms = containerElms || this.config.containers\n\n\t\tif ( !containerElms ) return\n\n\t\tlet len = containerElms.length\n\n\t\tfor ( let i = 0, elm; i < len; i++ ) {\n\n\t\t\telm = containerElms[ i ]\n\n\t\t\tif ( this.getContainer( elm ) ) {\n\n\t\t\t\t/* eslint-disable no-console */\n\t\t\t\tconsole.warn( 'container already registered', elm )\n\t\t\t\t/* eslint-enable no-console */\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\tthis.containers.push( new Container( this, elm, config ) )\n\t\t\t}\n\t\t}\n\t}\n\n\t@middle\n\tgetContainer( elm, own ) {\n\n\t\tif ( own )\n\t\t\treturn this.containers[ lookUpByElm( this.containers, elm ) ]\n\n\t\tlet dragons = space.dragons\n\t\tlet dragonsLen = dragons.length\n\n\t\tfor ( let i = 0, ii; i < dragonsLen; i++ ) {\n\n\t\t\tii = lookUpByElm( dragons[ i ].containers, elm )\n\n\t\t\tif ( ii > -1 )\n\t\t\t\treturn dragons[ i ].containers[ ii ]\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t@middle\n\tgrab( elm, x, y ) {\n\n\t\tlet itemElm = elm\n\t\tlet parentElm = elm\n\t\tlet container\n\t\tlet index\n\n\t\tif ( isInput( itemElm ) ) {\n\t\t\t// see also: github.com/bevacqua/dragula/issues/208\n\t\t\te.target.focus() // fixes github.com/bevacqua/dragula/issues/176\n\t\t\treturn\n\t\t}\n\n\t\tdo {\n\t\t\titemElm = parentElm // drag target should be a top element\n\t\t\tparentElm = getParent( itemElm )\n\t\t}\n\t\twhile ( parentElm && !this.getContainer( parentElm ) )\n\n\t\tif ( !parentElm ) {\n\t\t\t// container not found, so don't grab\n\t\t\treturn\n\t\t}\n\n\t\tindex = lookUpByElm( this.containers, parentElm )\n\t\tcontainer = this.containers[ index ]\n\t\treturn container.grab( x, y, itemElm )\n\t}\n\n\t@middle\n\tfindDropTarget( elementBehindCursor ) {\n\n\t\tlet target = elementBehindCursor\n\n\t\twhile ( target && !this.getContainer( target ) ) {\n\t\t\ttarget = getParent( target )\n\t\t}\n\n\t\treturn target\n\t}\n\n\t@middle\n\tgetConfig( prop ) {\n\n\t\tprop = this.config.hasOwnProperty( prop ) ? this.config[ prop ] : this.defaults[ prop ]\n\t\treturn typeof prop == 'function' ? prop() : prop\n\t}\n\n}\n"],"names":["useNative","p","NativeCustomEvent","detail","foo","type","e","addEventEasy","el","fn","capturing","addEventListener","addEventHard","attachEvent","wrap","removeEventEasy","removeEventListener","removeEventHard","listener","unwrap","detachEvent","fabricateEvent","model","eventmap","indexOf","customEvent","doc","createEvent","initEvent","createEventObject","dispatchEvent","fireEvent","wrapperFactory","originalEvent","global","event","target","srcElement","preventDefault","returnValue","stopPropagation","cancelBubble","which","keyCode","call","wrapper","hardCache","push","element","i","find","splice","item","length","getImmediateChild","dropTarget","immediate","getParent","docElm","getReference","x","y","direction","resolve","after","nextEl","horizontal","rect","getBoundingClientRect","left","getRectWidth","top","getRectHeight","len","children","width","height","getCoord","coord","host","getEventHost","missMap","targetTouches","changedTouches","getOffset","getScroll","scrollProp","offsetProp","clientHeight","body","getElementBehindPoint","elmToHide","state","className","elementFromPoint","right","bottom","parentNode","nextElementSibling","sibling","nextSibling","nodeType","toArray","obj","slice","bind","methodName","bindedName","apply","arguments","domIndexOf","parent","child","Array","prototype","isInput","tagName","isEditable","contentEditable","lookUpByElm","sourceArray","elm","lookupClass","cached","cache","lastIndex","RegExp","start","end","addClass","current","test","rmClass","replace","trim","middle","t","_","n","_m_ctx","this","_m_stack","_m_index","unshift","use","decorator","writable","enumerable","get","value","Object","defineProperty","DOMTokenList","classes","split","window","Element","document","documentElement","join","token","contains","toString","index","remove","add","prop","getter","__defineGetter__","Date","now","getTime","Function","oThis","TypeError","aArgs","fToBind","fNOP","fBound","concat","CustomEvent","params","initCustomEvent","bubbles","cancelable","Boolean","eventname","ron","addEvent","removeEvent","fabricate","op","touch","pointers","microsoft","navigator","pointerEnabled","msPointerEnabled","Drag","itemElm","sourceContainer","container","source","dragon","findDropTarget","requestAnimationFrame","_mousemove","_mousemoveAF","move_e","mousemove","events","release","startByMouseMove","cancel","drag","actualFrame","mirrorX","itemOffsetX","mirrorY","itemOffsetY","mirror","style","elementBehindCursor","reference","currentSibling","insertBefore","clientX","clientY","log","initialSibling","offset","renderMirrorImage","getConfig","mirrorContainer","cloneNode","rm","appendChild","removeChild","cancelAnimationFrame","drop","getContainer","addItem","cleanup","reverts","isInitialPlacement","removeMirrorImage","s","Item","config","id","hasOwnProperty","Container","items","initItems","grab","itemOrElm","arr","dragonSpace","space","Dragon","containers","initSpace","dragons","defaults","addContainers","newSpace","containerElms","warn","own","ii","dragonsLen","parentElm","focus"],"mappings":"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"}